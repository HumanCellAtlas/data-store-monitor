# Resolve the location of this file and set DSS_HOME to the root
SOURCE="${BASH_SOURCE[0]}"
while [ -h "$SOURCE" ] ; do SOURCE="$(readlink "$SOURCE")"; done
export DSS_MON_HOME="$(cd -P "$(dirname "$SOURCE")" && pwd)"

EXPORT_ENV_VARS_TO_LAMBDA_ARRAY=(
DSS_INFRA_TAG_STAGE

)


set -a

AWS_DEFAULT_OUTPUT=json
AWS_DEFAULT_REGION=us-east-1
GCP_PROJECT_NAME=human-cell-atlas-travis-test
GCP_DEFAULT_REGION=us-central1
DSS_DEPLOYMENT_STAGES="dev,integration,staging"
DSS_MONITOR_EVENT_BUCKET=dss-monitor-event-bucket
DSS_INFRA_TAG_PROJECT=dcp
DSS_INFRA_TAG_STAGE=dev
DSS_INFRA_TAG_SERVICE=dss
DSS_INFRA_TAG_OWNER=dss-team@data.humancellatlas.org
DSS_MON_HMAC_SECRET_NAME=hmac-sub
DSS_MON_PARAMETER_STORE="dcp/dss/plugins"
DSS_MON_SECRETS_STORE="dcp/dss/plugins"
DSS_MON_WEBHOOK_SECRET_NAME=monitor-webhook
DSS_MON_GCP_SERVICE_ACCOUNT_NAME=dss-monitor-${DSS_INFRA_TAG_STAGE}
HCA_CONFIG_FILE=${DSS_MON_HOME}/deployments/${DSS_INFRA_TAG_STAGE}/config.json
GOOGLE_APPLICATION_CREDENTIALS=${DSS_MON_HOME}/deployments/${DSS_INFRA_TAG_STAGE}/gcp-credentials.json
DSS_MON_TERRAFORM_BACKEND_BUCKET_TEMPLATE="org-humancellatlas-dss-{account_id}-${DSS_INFRA_TAG_STAGE}-terraform"


# nested variables
CHALICE_APP_NAME=dss-monitor-${DSS_INFRA_TAG_STAGE}

AWS_SDK_LOAD_CONFIG=1 # Needed for Terraform to correctly use AWS assumed roles
set +a